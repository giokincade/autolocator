#! /bin/bash

export BOARD=$(arduino-cli board list | grep '/dev/' | tail -1)
export FQBN=$(echo $BOARD | awk '{ print $(NF) }')
# For whatever reason Arduino changed the core package name for the Mega AVR.
export CORE_PACKAGE=$(echo $FQBN | sed -e "s/arduino:avr:uno/arduino:avr/g")
export CORE_PACKAGE=$(echo $CORE_PACKAGE | sed -e "s/arduino:avr:mega/arduino:avr/g")

export DEVICE=$(echo $BOARD | awk '{ print $1 }')

function assertBoardConnected {
    if [[ -z $BOARD ]] || [[ "$BOARD" == "No boards found." ]]
    then
        echo "Can't find any arduinos! Check that USB homie."
        exit;
    fi
}

